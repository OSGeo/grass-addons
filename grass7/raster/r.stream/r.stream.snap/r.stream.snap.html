<h2>DESCRIPTION</h2>
<P>
Module r.stream.snap is a suplementary module for r.stream.extract and
r.stream.basins to correct position of outlets or stream init points as they do
not lie on the streamliens.
<BR>
For outlets situation is clear. Points are snapped to nearest point whcich lies
on the streamline. In situaltion where there can be a small tributuary nearer
than main stream accumulation treshold shall be high enough to force program
ignoring this tributuary and snap to the main stream. If there is no
accumulation map points will be snapped to nearest stream line whcich in
particular situation may be wrong. Bacuase r.stream is perepared to work with
MFD accum maps, both stream network and accum map is neccesary to resolve the
problem.
<BR>
While it is assumed accum map is a MFD map, if stream network is not supplied,
snap point is calculated in different way: treshold is used to select only these
points in search radius wchich are accum value is greater than treshold. Next
mean value of these points is calculated and its value is taken as a new
treshold. This procedure guarantee that points are snapped to the center of
stream tube. While for inits small tresholds are in use, it is probable than
points were snapped to the streamtube border instead of its center.
</p>
<p>
It is strongly recommended, to use both stream network (even pre-genearted with
small accum treshold) and accumulation map, than accum or stream map only.
</p>

<h2>OPTIONS</h2>
<DL>
<DT><b>streams</b></DT>
<DD>Stream network created by r.stream.extract or r.watershed. If used, points
are snapped to the nearest streamline point which accumulation is grater than
treshold. If accumulation is not used point is snapped to the nearest stream.
</DD>

<DT><b>accum</b></DT>
<DD>Accumulation map created with r.waterhed and used to genearte stream network
with r.stream.extract. If stream network is not in use, point is adaptively
snapped to the to point where value is greater than mean values of accumulation
grater than given treshold in a searcyh radius. See description for details.
</DD>
<DT><b>radius</b></DT>
<DD>Search radius (in cells). If there are no streams in search radius, point is
not snapped. If there are no cells with accumulation grater than accumtreshold
point also is not snapped.
</DD>

<DT><b>accumtres</b></DT>
<DD>Minimum value of accumulation which cell must have to snap point. This
option is added to snap stream inits to the stream tubes and to distinguish
between local tributuaries and main streams.
</DD>

<DT><b>input</b></DT>
<DD>Vector file containing outlets or inits as vector points. Only point's
categories are used Table attached to it is ignored. Every point shall heve his
own unique category.
</DD>
</DL>


<h2>OUTPUTS</h2>
<P>Vector file containing outlets or inits after snapping. On layer 1 oryginal
categories are preserved, on layer 2 there are four categories which mean:</p>
<ol>
<li>skipped (not in use yet)
<li>unresolved (points remain unsnapped due to lack of streams in search radius
<li>snapped (points snapped to streamlines)
<li>correct (points whcich remain on its original position, wchich was
originally corected
</ol>


<h2>SEE ALSO</h2>

<em>
<a href="r.watershed.html">r.watershed</a>,
<a href="r.stream.extract.html">r.stream.extract</a>,
<a href="r.stream.basins.html">r.stream.basins</a>,
<a href="r.stream.order.html">r.stream.order</a>,
<a href="r.stream.stats.html">r.stream.stats</a>,
<a href="r.mapcalc.html">r.mapcalc</a>,
<a href="r.reclass.html">r.reclass</a>,
<a href="r.patch.html">r.patch</a>
</em>

<h2>AUTHOR</h2>
Jarek Jasiewicz, Adam Mickiewicz University, Geoecology and Geoinformation
Institute.

<p><i>Last changed: $Date$</i>

