<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>GRASS GIS manual: ps.output</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="grassdocs.css" type="text/css">
</head>
<body bgcolor="white">

<img src="grass_logo.png" alt="GRASS logo"><hr align=center size=6 noshade>

<h2>NAME</h2>
<em><b>ps.output</b></em>  - PostScript-3 Output.
<h2>KEYWORDS</h2>
postscript, map, printing
<h2>SYNOPSIS</h2>
<b>ps.output</b><br>
<b>ps.output help</b><br>
<b>ps.output</b> [-<b>d</b>]  [<b>input</b>=<em>string</em>]  <b>output</b>=<em>string</em>  [--<b>verbose</b>]  [--<b>quiet</b>] 

<h3>Flags:</h3>
<DL>
<DT><b>-d</b></DT>
<DD>Create a 1x1cm grid on paper to easy place and drawing</DD>

<DT><b>--verbose</b></DT>
<DD>Verbose module output</DD>
<DT><b>--quiet</b></DT>
<DD>Quiet module output</DD>
</DL>

<h3>Parameters:</h3>
<DL>
<DT><b>input</b>=<em>string</em></DT>
<DD>File containing mapping instructions</DD>

<DT><b>output</b>=<em>string</em></DT>
<DD>PostScript output file</DD>

</DL>
<H2>DESCRIPTION</H2>

<EM>ps.output</EM> is a cartographic mapping program for producing high quality
hardcopy maps in PostScript-3 format. Output can include a raster map, any
number of vector overlays, notes, decorations, and other spatial data.

<P>
A file of mapping instructions that describes the various spatial and textual
information to be printed must be prepared prior to running <EM>ps.output</EM>.


<H2>NOTES</H2>

<P>
The order of commands is generally unimportant but may affect how some layers
are drawn. For example to plot <B>vpoints</B> above <B>vareas</B> list the
<B>vpoints</B> entry first. Raster maps are always drawn first, and only a
single raster map and an optional background may be used
(or 3 if part of a RGB group).

<P>
The hash character ('<tt>#</tt>') may be used at the beginning of a line
to indicate that the line is a comment. Blank lines will also be ignored.

<P>
Be aware that some mapping instructions require the <i>end</i> command
and some do not. Any instruction that allows subcommands will require
it, any instruction that does not allow subcommands will not.

<P>
The resolution and extent of raster maps plotted with <EM>ps.output</EM> are controlled by the current region settings via the <a href="g.region.html">g.region</a> module. The output filesize is largely a function of the region resolution, so special care should be taken if working with large raster datasets.
For example if the desired output is Letter sized paper at 300dpi, with 1" margins and the raster filling the entire page, the usable area on the page will be 6.5" x 9", which at 300 dots/inch is equivalent to a region of 1950 columns x 2700 rows (see "<tt>g.region -p</tt>"). Any higher resolution settings will make the output file larger, but with a consumer printer you probably won't be able to resolve any better detail in the hardcopy.

<P>
The user can specify negative or greater than 100 percentage values for positioning several map decorations and embedded EPS-files, to move them outside the current map box region (for example to position a caption, barscale, or legend above or below the map box).

<P>
One "pixel" is 1/72 of an inch or 127/360 (~ 0.35) of a millimetre.

<P>
For users wanting to use special characters (such as accented characters) it is important to note that <em>ps.output</em> uses <tt>ISO-8859-1</tt> encoding. This means that your instructions file will have to be encoded in this encoding. If you normally work in a different encoding environment (such as <tt>UTF-8</tt>), you have to transform your file to the <tt>ISO-8859-1</tt> encoding, for example by using the <tt>iconv</tt> utility:
</P>
<DIV class="code"><PRE>
iconv -f UTF-8 -t ISO_8859-1 utf_file > iso_file
</PRE></DIV>


<P><P>

<H2>MAPPING INSTRUCTIONS</H2>

The mapping instructions allow the user to specify various spatial data to be plotted. These instructions are normally prepared in a regular text file using a system editor. Except <em>scale</em>, all instructions are multiple line followed by a subsection of one or more additional instructions and are terminated with an <i>end</i> instruction.
<P>

<h3>Instruction keywords:</h3>

<a href="#draw">draw</a>&nbsp;<BR>
<a href="#geogrid">geogrid</a>&nbsp; ERROR IN SOUTH HEMISPHERE<BR>
<a href="#grid">grid</a>&nbsp;<BR>
<a href="#maparea">maparea</a>&nbsp;<BR>
<a href="#note">note</a>&nbsp;<BR>
<a href="#palette">palette</a>&nbsp; CHECK<BR>
<a href="#paper">paper</a>&nbsp;<BR>
<a href="#raster">raster</a>&nbsp;<BR>
<a href="#rlegend">rlegend</a>&nbsp;<BR>
<a href="#scale">scale</a>&nbsp;<BR>
<a href="#scalebar">scalebar</a>&nbsp;<BR>
<a href="#vareas">vareas</a>&nbsp;<BR>
<a href="#vlines">vlines</a>&nbsp;<BR>
<a href="#vpoints">vpoints</a>&nbsp;<BR>
<a href="#vlegend">vlegend</a>&nbsp;<BR>


<h3>Convention in description of instructions:</h3>

<DL>
<DT><B>#</B> <EM>number</EM>
<P>
<DT><B>#-</B> <EM>dimension</EM> name (number with units)
<DD> Acceptable units are <em>mm</em> (millimeters), <em>cm</em> (centimeters), and <em>inch</em> (inches).
</DD><P>
<DT><B>CAT</B> <EM>List of categories</EM> e.g. 1,3,5-7
<P>
<DT><B>SQL</B> <EM>SQL where statement</EM> like: vlastnik = 'Cimrman'
<P>
<DT><b>T</b> <em>Text</em>
<P>
<DT><b>R</b> <em>Raster</em> file or group name if first character is ':'
<P>
<DT><b>V</b> <em>Vector</em> file
<P>

<DT><b>color</b> <em>Color</em> name
<DD>The color may be either a standard <a name="NAMED_COLORS">GRASS color</a>, a <tt>R:G:B</tt> triplet (e.g '<tt>255:0:0</tt>'), or <tt>none</tt>.
The following colors names are accepted by <EM>ps.output</EM>:
<tt>aqua, black, blue, brown, cyan, gray, grey, green, indigo, magenta, orange, purple, red, violet, white, yellow</tt>.
</DD><P>

<DT><B>font</B> command:
<PRE>
font
    name   [T]
    size   [#-]
    color  (color)
    extend [#]
end
</PRE>

<DD>
The name of the PostScript font. Fonts present in all PostScript implementations are:
<tt>
Times-Roman,
Times-Italic,
Times-Bold,
Times-BoldItalic,
Helvetica,
Helvetica-Oblique,
Helvetica-Bold,
Helvetica-BoldOblique,
Courier,
Courier-Oblique,
Courier-Bold,
and
Courier-BoldOblique
</tt>.
</DD><P>

<DT><B>frame</B> command:
<PRE>
frame
    where  [#- #-]
    ref    [left|right|center upper|lower|center]
    offset [# #]
    border [#-]
    color  (color)
    fcolor (color)
    margin [#-]
end
</PRE>

<DT><B>line</B> command:
<PRE>
line
    width [#-]
    color (color)
    style [solid|dashed|dotted|dashdotted|#...]
    cap   [butt|round|extended_butt]
end
</PRE>

<DT><b>COOR</b> <em>Coordinates</em> as pair of <b>east north</b>
<P>




</DL>
<P>




<H2>COMPOSE THE MAP</H2>


<h3>paper</h3>
<a name="paper"></a>
Specifies paper size, margins and orientation.

<PRE>
USAGE
<B>paper</B> [paper type], default: A4
    <B>height</B> [#-]
    <B>width</B>  [#-]
    <B>left</B>   [#-], default 0.5inch
    <B>right</B>  [#-], default 0.5inch
    <B>bottom</B> [#-], default 1.0inch
    <B>top</B>    [#-], default 1.0inch
    <B>landscape</B> [y|N], default N
<B>end</B>
</PRE>

<P>
Paper types: A0-6, B0-6, Executive, Folio, Ledger, Legal, Letter, Tabloid.<BR>

<PRE>
<i>EXAMPLE</i>
paper A4
    left 2cm
    top 4cm
    landscape y
end
</PRE>
<P>


<h3>scale</h3>
Selects a scale for the output map.

<PRE>
USAGE
<B>scale</B> 1:[#]
</PRE>

The scale is selected as a relative ratio, e.g. 1:25000. Use maparea to select a specific width of map.

<PRE>
<i>EXAMPLE</i>
    scale 1:25000
</PRE>
<P>

This example would set the scale of the map to 1 unit = 25000 units.


<h3>maparea</h3>

Positions the map area on the page.

<PRE>
USAGE
<B>maparea</B>
    <B>left</B>   [#-]
    <B>top</B>    [#-]
    <B>width</B>  [#-]
    <B>height</B> [#-]
    <B>border</B> [#-]
    <B>color</B>  [color]
 <B>end</B>
</PRE>

The upper left corner of the map will be positioned <EM>left</EM> units from the left edge of the page and <EM>top</EM> units from the top of the page. If <EM>width</EM> and <EM>height</EM> are present, the map will be rescaled, if necessary, to fit.
<P>

<em>border</em> and <em>color</em> controls the which and color of the line is drawn around the map area.
<P>

<PRE>
<i>EXAMPLE</i>
maparea
	left 2cm
	top 3.5cm
	border 1mm
	color black
end
</PRE>

This example positions the upper left corner of the map 2.0 cm from the left edge and 3.5 cm from the top edge of the map. And draw a black border of 1 mm of width around the map area.

<h3>palette</h3>




<H2>ADDING COMPONENTS</H2>

<h3>grid</h3>
<a name="grid"></a>
Overlays a coordinate grid onto the output map.

<PRE>
USAGE
<B>grid</B>
    <B>major</B>  [#] (line)
    <B>minor</B>  [#] (line)
    <B>cross</B>  [#]
    <B>font</B>   [font]
    <B>fcolor</B> [color]
    <B>format</B> [#], number (0-2) or 'in', 'out' or 'iho'
    <B>round</B>  [#]
 <B>end</B>
</PRE>

<PRE>
<I>EXAMPLE</I>
grid
    major 1000
        width .1mm
        color gray
        style 12
    end
    minor 200
        width .05mm
        color gray
        style 12
    end
    font
        name Univers
        size 7
        color white
    end
    fcolor black
    format 0
    round 3
end
</PRE>

This example would overlay a gray grid with a spacing of 10000 meters (for a metered database, like UTM) onto the output map.  Alternate grid lines would be numbered with white numbers on black boxes.


<h3>geogrid</h3>
<a name="geogrid"></a>

<PRE>
USAGE
<B>geogrid</B>
    <B>major</B>  [#] (line)
    <B>minor</B>  [#] (line)
    <B>font</B>   [font]
    <B>fcolor</B> [color]
    <B>format</B> [#], number (0-1) or 'in' or 'out'
 <B>end</B>
</PRE>

<PRE>
<I>EXAMPLE</I>
geogrid
    format out
    major 30'
        width .3
        color magenta
    end
    minor 5'
        width .1
        color magenta
        style 1
    end
    font
        name Univers
        size 5
        color black
        extend 1.2
    end
    fcolor none
end
</PRE>


<H3>scalebar</H3>
<a name="scalebar"></a>

<PRE>
<I>USAGE</I>
<B>scalebar</B>   [scalebar type]
    <B>length</B> [#]
    <B>units</B>  [code T]
    <B>major</B>  [# #], divisions and seperation text label
    <B>minor</B>  [# #], divisions and seperation text label
    <B>frame</B>  [frame]
    <B>font</B>   [font]
    <B>height</B> [#-]
    <B>fcolor</B> [color]
<B>end</B>
</PRE>

Scalebar types: I F f S s

<PRE>
<I>EXAMPLE</I>
scalebar f
    frame
        where 50% 0%
        offset 0 12
        ref center upper
        border 0.5mm
        color black
        fcolor gray
    end
    font
        name Univers
        size 8
        color black
    end
    length 20
    units km Kilometers
    major 5 2
    minor 2 2
    height 2mm
end
</PRE>


<h3>note</h3>
<a name="note"></a>

<PRE>
USAGE
<B>note</B> [code T]
    <B>frame</B> [frame]
    <B>font</B> [font]
    <B>angle</B> [#] in degrees
 <B>end</B>
</PRE>

Note codes: :file (filename),
    :maplim,
    :dimen,
    :scale (pre-text)
    or simple text use '|' to break lines (max 1024 characters)


<PRE>
<I>EXAMPLE</I>
note :scale scale
    frame
        where 0% 0%
        offset -12 -4
        ref left lower
        border 0
        fcolor none
    end
    angle 90
    font
        name Univers
        size 6
        extend 1.25
        color gray
    end
end
</PRE>



<h2>ADDING RASTER MAPS</h2>

<a name="raster"><H3>raster</H3></a>
Selects a raster map for output.

<PRE>
<I>USAGE</I>
<B>raster</B> [R|R R R], required: one raster, one group name (:name) or three raster (RGB)
    <B>grey</B>      [y|N]. Output in shades of grey.
    <B>maskcolor</B> [color]. Color to be used for mask.
    <B>maskcell</B>  [R (R)]. Raster used as mask and optionally a raster for background.
    <B>outline</B>   [line]. Specifications of outline.
    <B>setcolor</B>  [cat color]. Overrides the color of cat
end
</PRE>

<PRE>
<I>EXAMPLE</I>
raster geology
    grey n
    maskcolor none
    maskcell geo_mask elev_state_500m
    outline
        width .01
        color black
    end
    setcolor 28 200:123:200
end
</PRE>


<h2>ADDING VECTOR MAPS</h2>

<a name="vareas"><H3>vareas</H3></a>

<PRE>
USAGE
<B>vareas</B> [V]. Vector map name
    <b>width</b>  [#-], default 0 (positive or negative, permit draw a line as area).
    <b>layer</b>  [#], default: 1. Layer number used with cats/where option
    <b>cats</b>   [CAT]
    <b>where</b>  [SQL].
    <b>line</b>   (line)
    <b>fcolor</b> (color) ([T]). Fill color and, optionally RGB column name (also apply to pattern).
    <b>pat</b>    [T]. Pattern EPS file.
    <b>scale</b>  [#]
    <b>pwidth</b> [#]
    <b>masked</b> [y|N]. Masked by raster mask
    <b>label</b>  [T]. For description in vlegend
    <b>lpos</b>   [#]. Position vector is plotted in legend
<b>end</b>
</PRE>

<a name="vlines"><H3>vlines</H3></a>

<PRE>
USAGE
<B>vlines</B> [V]. Vector map name
    <b>type</b>   [line|boundary], default: line
    <b>layer</b>  [#], default: 1. Layer number used with cats/where option
    <b>cats</b>   [CAT]
    <b>where</b>  [SQL]
    <b>line</b>   (line)
    <b>rgbcol</b> [T]. Column name with line color data
    <b>hline</b>  [# (line)], default: 0; and enter line command. Offset dimen from midline
    <b>masked</b> [y|N]. Masked by raster mask
    <b>label</b>  [T]. For description in vlegend
    <b>lpos</b>   [#]. Position vector is plotted in legend
<b>end</b>
</PRE>

<PRE>
<i>EXAMPLE</i>
vlines railroads
    type line
    label Rail roads
    line
        width .4mm
        color green
    end
    hline
        width .1mm
        color black
    end
    masked n
end
</PRE>

<a name="vpoints"><H3>vpoints</H3></a>

<PRE>
USAGE
<B>vpoints</B> [V]. Vector map name
    <b>type</b>   [point|centroid], default: point
    <b>layer</b>  [#], default: 1. Layer number used with cats/where option
    <b>cats</b>   [CAT]
    <b>where</b>  [SQL]
    <b>symbol</b> [T]. Symbol standard or EPS file.
    <b>line</b>   (line)
    <b>fcolor</b> (color). Fillcolor
    <b>size</b>   [# ([T])]. Size and optionally size column.
    <b>scale</b>  [#]. Scale
    <b>rotate</b> [# ([T])]. Rotate and optionally rotate column.
    <b>masked</b> [y|N]. Masked by raster mask
    <b>label</b>  [T]. For description in vlegend
    <b>lpos</b>   [#]. Position vector is plotted in legend
<b>end</b>
</PRE>

<PRE>
<i>EXAMPLE</i>
vpoints precip_30ynormals
    type centroid
    symbol basic/circle
    fcolor red
    line
        width .2
        color black
    end
    size 10 ANNUAL
    scale .01
end
</PRE>

<h2>ADDING LEGENDS</h2>

<a name="rlegend"><H3>rlegend</H3></a>

<PRE>
USAGE
<B>rlegend</B>
    <b>raster</b>
    <b>title</b>
    <b>frame</b>
    <b>font</b>
    <b>cols</b>
    <b>width</b>
    <b>height</b>
    <b>tick</b>
    <b>order</b>
    <b>whiteframe</b>
<b>end</b>
</PRE>

<PRE>
<i>EXAMPLE</i>
rlegend
    title Land Class 1996
        name Univers Bold
        size 12
        extend 0.85
        color black
    end
    raster landclass96
    cols 1 0
    frame
        where 100% 100%
        ref right upper
        offset 0 0
        border 2
        color  black
        fcolor white
        margin 8
    end
    font
        name Univers
        size 9
        color black
    end
    width 8mm
    height 7cm
    tick 3
    whiteframe 1
end
</PRE>

<a name="vlegend"><H3>vlegend</H3></a>

<PRE>
USAGE
<B>vlegend</B>
    <b>title</b> (first char point to center)
    <b>frame</b>
    <b>font</b>
    <b>cols</b>
    <b>width</b>
    <b>order</b>
<b>end</b>
</PRE>

<PRE>
<i>EXAMPLE</i>
vlegend
    title .Leyenda
        name Univers-Bold
        size 10
        extend 1.1
    end
    frame
        where 100% 100%
        ref left upper
        offset 10 0
        border 1
    end
    font
        name Univers
        size 9
    end
#   cols 1
#   width 1cm
end
</PRE>


<H2>AUTHOR</H2>

E. Jorge Tizado  (ej.tizado unileon es)<br>
Dept. Biodiversity and Environmental Management, University of León, Spain<BR>

<p>
<i>Last changed: $Date: 2009/05/24 00:00:00 $</i>
<HR>
<P><a href="index.html">Main index</a> - <a href="postscript.html">postscript index</a> - <a href="full_index.html">Full index</a></P>
<P>&copy; 2003-2009 <a href="http://grass.osgeo.org">GRASS Development Team</a></p>
</body>
</html>
