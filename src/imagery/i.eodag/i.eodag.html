<h2>DESCRIPTION</h2>
<h3>WARNING: I.EODAG IS UNDER DEVELOPMENT. THIS IS AN EXPERIMENTAL VERSION.</h3>

<em>i.eodag</em> allows to search and download imagery scenes, e.g. Sentinel,
Landsat, and MODIS, from a number of different providers.
The module utilizes the
<a href="https://eodag.readthedocs.io/en/stable/">EODAG API</a>,
as a single interface to search for scenes on the providers that EODAG supports.


<p>
Currently, only products which footprint intersects the current computational
region extent (area of interest, AOI) are retrieved.

<p>
To only list available scenes, <b>l</b> flag must be set. If no <b>start</b>
or <b>end</b> dates are provided, the module will search scenes from the
past 60 days.

<p>
To download all scenes found within the time frame provided, the user must
remove the <b>l</b> flag and provide an <b>output</b> directory. Otherwise,
files will be downloaded into <em>/tmp</em> directory.
To download only selected scenes, one or more IDs must be provided
through the <b>id</b> option.

<p>
To be able to download data through <em>i.eodag</em>, the user will need to register for the
providers of interest.
<em>i.eodag</em> reads the user credentials, which the user should have acquired,
from the EODAG YAML config file.  User have to specify the config file path
location through the <b>config</b> option, otherwise <em>i.eodag</em>
will use the credentials found in the default config file <em>~/.config/eodag/eodag.yml</em>

<p>
Following is an example for a config YAML file with <em>Copernicus Dataspace</em> credentials:
<div class="code"><pre>
cop_dataspace:
    priority: # Lower value means lower priority (Default: 0)
    search:   # Search parameters configuration
    download:
        extract:
        outputs_prefix:
    auth:
        credentials:
          username: email@email.com
          password: password
</pre></div>

<p>
See
<a href="https://eodag.readthedocs.io/en/stable/getting_started_guide/register.html" target="_blank">
  Providers Registration</a>,
and <a href="https://eodag.readthedocs.io/en/stable/getting_started_guide/configure.html" target="_blank">
  Configure EODAG</a>
sections for more details about registration and configuration of the providers' credentials.

<h2>EXAMPLES</h2>

Search and list the available Sentinel 2 scenes in the Copernicus Data Space Ecosystem, using a Vector Map as an AOI:

<div class="code"><pre>
v.extract input=urbanarea where="NAME = 'Durham'" output=durham

i.eodag -l start=2022-05-01 end=2022-06-01 \
    map=durham producttype=S2_MSI_L2A provider=cop_dataspace

6 scenes(s) found.
S2B_MSIL2A_20220518T155819_N0400_R097_T17SPV_20220518T204903 2022-05-18T15:58:19 24% S2MSI2A
S2A_MSIL2A_20220513T155821_N0400_R097_T17SPV_20220514T002317 2022-05-13T15:58:21 99% S2MSI2A
S2B_MSIL2A_20220508T155819_N0400_R097_T17SPV_20220508T205707 2022-05-08T15:58:19 100% S2MSI2A
S2A_MSIL2A_20220523T155831_N0400_R097_T17SPV_20220524T002713 2022-05-23T15:58:31 95% S2MSI2A
S2A_MSIL2A_20220503T155831_N0400_R097_T17SPV_20220503T233818 2022-05-03T15:58:31 86% S2MSI2A
S2B_MSIL2A_20220528T155819_N0400_R097_T17SPV_20220528T205325 2022-05-28T15:58:19  2% S2MSI2A
<pre></div>

Search and list the available Sentinel 2 scenes in the Copernicus Data Space
Ecosystem, with at least 70% of the AOI covered:
<div class="code"><pre>
v.extract input=urbanarea where="NAME = 'Durham'" output=durham

i.eodag -l start=2022-05-01 end=2022-06-01 \
    producttype=S2_MSI_L2A provider=cop_dataspace \
    clouds=50 map=durham minimum_overlap=70
<pre></div>

Sort results, descendingly, by <b>cloudcover</b>, and then by <b>ingestiondate</b>
Note that sorting with <b>cloudcover</b> use
unrounded values, while they are rounded to the nearest integer when listing.

<div class="code"><pre>
i.eodag -l start=2022-05-25 end=2022-06-01 \
    producttype=S2_MSI_L2A provider=cop_dataspace \
    sort=cloudcover,ingestiondate order=desc
<pre></div>

Search for scenes with a list of IDs text file, and filter the results with the
provided parameters:

<div class="code"><pre>
i.eodag -l file=ids_list.txt \
    start=2022-05-25 \
    area_relation=Contains clouds=3
<pre></div>

Search and list the available Sentinel 2 scenes in the Copernicus Data Space
Ecosystem, with relative orbit number 54:

<div class="code"><pre>
i.eodag -l producttype=S2_MSI_L2A \
    provider=cop_dataspace save=search_result.geojson \
    query="relativeOrbitNumber=54"
<pre></div>

Download all available scenes with cloud coverage not exceeding 50%
in the tmp directory:

<div class="code"><pre>
i.eodag start=2022-05-25 end=2022-06-01 \
    producttype=S2_MSI_L2A provider=cop_dataspace clouds=50
<pre></div>

Download only selected scenes from a text file of IDs, using the Copernicus Data
Space Ecosystem as the provider:

<div class="code"><pre>
i.eodag file=ids_list.txt provider=cop_dataspace
<pre></div>

Download and extract only selected scenes into the <em>download_here</em>
directory, using a custom config file:

<div class="code"><pre>
i.eodag -e provider=cop_dataspace \
    id="S2B_MSIL2A_20240526T080609_N0510_R078_T37SDD_20240526T094753,
    S2B_MSIL2A_20240529T081609_N0510_R121_T37SED_20240529T124818" \
    config=full/path/to/eodag/config.yaml \
    output=download_here
<pre></div>

List recognized eodag providers:
<div class="code"><pre>
i.eodag print=providers
<pre></div>

List recognized eodag providers, offering Sentinel 2 scenes:
<div class="code"><pre>
i.eodag print=providers producttype=S2_MSI_L2A
<pre></div>

List recognized eodag products:
<div class="code"><pre>
i.eodag print=products
<pre></div>

List recognized eodag products, offered by Copernicus Data Space Ecosystem:
<div class="code"><pre>
i.eodag print=products provider=cop_dataspace
<pre></div>

List queryables for Sentinel 2 scenes, that is offered by Copernicus Data Space Ecosystem:
<div class="code"><pre>
i.eodag print=queryables provider=cop_dataspace producttype=S2_MSI_L2A
<pre></div>

List current EODAG configuration:
<div class="code"><pre>
i.eodag print=config
<pre></div>

List current EODAG configuration for Copernicus Data Space Ecosystem:
<div class="code"><pre>
i.eodag print=config provider=cop_dataspace
<pre></div>

<h2>REQUIREMENTS</h2>

<ul>
    <li><a href="https://eodag.readthedocs.io/en/stable/getting_started_guide/install.html">EODAG library</a>
    (install with <code>pip install eodag</code>)</li>
</ul>

<h2>SEE ALSO</h2>

<em>
<a href="i.landsat.html">i.landsat</a>,
<a href="i.sentinel.html">i.sentinel</a>,
<a href="i.modis.html">i.modis</a>
</em>

<h2>AUTHOR</h2>

<a href="https://github.com/HamedElgizery" target="_blank">Hamed Elgizery</a>, Giza, Egypt.<br>
<p>
GSoC 2024 Mentors: Luca Delucchi, Stefan Blumentrath, Veronica Andreo
</p>
