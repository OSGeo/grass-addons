<h2>DESCRIPTION</h2>

<em>v.to.rast.extern</em> transforms an external vector file (like 
GeoPackage) into a raster file and import this into GRASS GIS. 
Optionally, attributes from the vector layer can be converted to raster 
category labels. 


<p> When you have a vector file that you want to convert to a raster 
layer, you would normally import the vector layer in GRASS GIS using, 
e.g., <em>v.in.ogr</em>, and subsequently convert the resulting vector 
layer to a raster layer using <em>v.to.rast</em>. Because of the 
topological vector format of GRASS, importing large vector layers can 
be slow. To speed up the process, <em>v.in.ogr</em> converts the 
user-defined vector file to an intermediate geoTIF file externally 
(using <a 
href="https://gdal.org/api/python/utilities.html#osgeo.gdal.Rasterize">gdal.rasterize</a>) 
and import the geoTIF raster file in GRASS GIS. 

<h2>Notes</h2>

By default, <em>v.to.rast.extern</em> will only affect data in areas 
lying inside the boundaries of the current geographic region. Before 
running the function, the user should therefore ensure that the current 
geographic region is correctly set, and that the region resolution is at 
the desired level. Alternatively, the user can use the <b>-v</b> flag 
to import the whole vector layer. To ensure 
that the resulting raster layer  cleanly aligns with the computational 
region, the extent may be slightly larger than that of the vector 
layer.

<p>
If the coordination reference system (CRS) of the vector file differs 
from that of the mapset in which you want to import the raster, the 
vector file will first be reprojected using <em>ogr2ogr</em>.

<p>
By default, the object in the vector layer will be assigned a value of 
<i>1</i> in the resulting raster layer. The user can change this value 
using the <b>value</b> parameter. Alternatively, the user can specify 
the name of an existing column from the vector map's attribute table. 
In that case, the values in that column will be used as raster values 
in the output raster map.

<p>
You can use the <b>label_column</b> parameter to assign raster category 
labels. The user should check if each unique value from the category 
column has one corresponding label in the label column. If there are 
categories with more than one label, the first from the label column 
will be used (and a warning will be printed).

<p>
With the <b>-d</b> flag, all pixels touched by lines or polygons will 
be updated, not just those on the line render path, or whose center 
point is within the polygon. For lines, this is similar to setting the 
<i>-d</i> flag in <em>v.to.rast</em>.

<h2>EXAMPLE</h2>

The examples of <em>v.to.rast.extern</em> use vector layers from the 
(<a href="https://grass.osgeo.org/download/data/">North Carolina sample 
data set</a>). 

<h3>Example 1</h3>

First, export a vector layer as a GeoPackage. 

<div class="code"><pre>
# Export the geology vector layer as Geopackage
v.out.ogr input=geology@PERMANENT output=geology.gpkg format=GPKG
</pre></div>

<p>
Import the geology.gpkg as raster. Raster cells overlapping with the 
vector features will be assigned a value of 1, and the other raster 
cells Nodata. If you have RAM to spare, increase the memory to speed up 
the import.

<div class="code"><pre>
# Set the region
g.region -a vector=geology res=500

# Import the layer
v.to.rast.extern input=geology.gpkg \
output=geology_rast \
memory=20000
</pre></div>

<div align="left" style="margin: 10px"> <a 
href="v_to_rast_extern_im01.png"> <img src="v_to_rast_extern_im01.png" 
alt="The geology vector file converted to, and imported as raster in 
GRASS. Example 1" border="0"> </a><br><i>Figure 1: The geology vector file was 
converted to, and imported as a raster in GRASS, using the default 
settings.</i> </div>

<p>
Note that if you have a GeoPackage (or any other data source) with 
multiple layers, you need to specify which layer you want to use with 
the <b>layer</b> parameter. If you do not, the first layer will be 
selected. 

<h3>Example 2</h3>

Import the geology.gpkg as raster. Specify the column of the attribute 
table that holds the values you would like to use as raster values and 
the column that holds the labels you want to assign to the raster 
values.

<div class="code"><pre>
# Import the layer
v.to.rast.extern input=geology.gpkg \
output=geology_rast2 \
attribute_column=GEOL250_ \
rat_column=GEO_NAME
memory=2000

# Assign random colors
r.colors map=geology_rast2 color=random
</pre></div>

<div align="left" style="margin: 10px"> <a 
href="v_to_rast_extern_im02.png"> <img src="v_to_rast_extern_im02.png" 
alt="The geology vector file converted to, and imported as raster in 
GRASS. Example 2" border="0"> </a><br><i>Figure 2: The geology vector file 
converted to and imported as a raster in GRASS, using as raster values 
the values from the attribute column GEOL250_.</i> </div>


<h3>Example 3</h3>

First, set the resolution to 1 meter. Next, export the busroute6 vector 
layer as GeoPackage, and import it as a raster layer. Use the <b>-v</b> 
flag to ensure the extent of the raster layer matches that of the 
vector layer (by default, the bounding box of the raster layer will 
match that of the current computation region).

<div class="code"><pre>
# Set the resolution to 1 m
g.region -a res=1	

# Export the busrout6 vector layer
v.out.ogr input=busroute6@PERMANENT \
type=line \
output=busroute6.gpkg \
format=GPKG

# Import it as raster layer, using the extent of the vector layer
v.to.rast.extern input=busroute6.gpkg \
output=busroute6_1 \
memory=2000 -v
</pre></div>

<div align="left" style="margin: 10px"> <a 
href="v_to_rast_extern_im03.png"> <img src="v_to_rast_extern_im03.png" 
alt="The busroute6 vector file converted to, and imported as raster in 
GRASS. Example 1" border="0"> </a><br><i>Figure 3: The busroute6 vector file 
converted to, and imported as raster in GRASS, using the default 
parameter settings.</i> </div>


<h3>Example 4</h3>

The same as above, but using the <b>-d</b> flag to create densified 
lines.

<div class="code"><pre>
# Import it as a raster layer, using the extent of the vector layer
v.to.rast.extern input=busroute6.gpkg \
output=busroute6_2 \
memory=2000 -v -d
</pre></div>

<div align="left" style="margin: 10px"> <a 
href="v_to_rast_extern_im04.png"> <img src="v_to_rast_extern_im04.png" 
alt="The busroute6 vector file converted to, and imported as raster in 
GRASS. Example 2" border="0"> </a><br><i>Figure 4: Rasterize the busroute 6, 
using the <b>-d</b> flag to create densified lines by adding extra 
cells (here in red). This avoids gaps or lines that consist of cells 
that are only diagonally connected.</i> </div>

<h2>SEE ALSO</h2>

<em>
<a href="https://grass.osgeo.org/grass-stable/manuals/v.to.rast.html">v.to.rast</a>,
</em>

<h2>AUTHORS</h2>

Paulo van Breugel (<a href="https://ecodiv.earth">ecodiv.earth</a><br> Applied Geo-information Sciences<br> <a
href="https://www.has.nl/">HAS green academy, University of Applied
Sciences</a><br>
